import { c as s, i as c } from "../../admin.bundle-CEbNEZ37.js";/* empty css                               */import { A as u } from "../../air-datepicker-C9mgs6L9.js"; import "../../main-O_SKZbQk.js"; import "../../_commonjsHelpers-CqkleIqs.js"; class p {
  constructor(e) { this.tableBodyId = e.tableBodyId, this.paginationId = e.paginationId, this.paginationInfoId = e.paginationInfoId, this.formId = e.formId, this.modalId = e.modalId, this.deleteModalId = e.deleteModalId, this.itemsPerPage = e.itemsPerPage || 10, this.currentPage = 1, this.currentSortColumn = null, this.currentSortDirection = "asc", this.data = [{ id: "PR-1001", title: "Modern Apartment", location: "Brooklyn Downtown, NY", type: "Apartment", price: "$375,000", area: 1200, status: "For Sale", agent: "Max Boucaut", dateListed: "2023-02-20" }, { id: "PR-1002", title: "Luxury Villa", location: "Beverly Hills West, CA", type: "Villa", price: "$2,100,000", area: 4500, status: "For Rent", agent: "Natasha Tegg", dateListed: "2024-01-15" }, { id: "PR-1003", title: "Office Space", location: "Downtown LA Central", type: "Office", price: "$950,000", area: 3e3, status: "Sold", agent: "Ethan Zahel", dateListed: "2023-03-01" }, { id: "PR-1004", title: "Commercial Shop", location: "Chicago North Side, IL", type: "Shop", price: "$650,000", area: 1600, status: "For Sale", agent: "Ryan Frazer", dateListed: "2023-04-12" }, { id: "PR-1005", title: "Beachfront Condo", location: "Miami South Beach, FL", type: "Condo", price: "$850,000", area: 2e3, status: "For Rent", agent: "Julian Marconi", dateListed: "2024-05-05" }, { id: "PR-1006", title: "Downtown Loft", location: "Seattle Central, WA", type: "Apartment", price: "$525,000", area: 1400, status: "For Sale", agent: "Poppy Dalley", dateListed: "2023-06-10" }, { id: "PR-1007", title: "Suburban House", location: "Austin Suburbs, TX", type: "House", price: "$450,000", area: 2500, status: "For Sale", agent: "Max Boucaut", dateListed: "2023-08-15" }, { id: "PR-1008", title: "Penthouse Suite", location: "Manhattan Upper East, NY", type: "Condo", price: "$1,800,000", area: 3200, status: "For Rent", agent: "Natasha Tegg", dateListed: "2024-02-20" }, { id: "PR-1009", title: "Retail Space", location: "San Francisco Downtown, CA", type: "Shop", price: "$1,200,000", area: 2200, status: "Sold", agent: "Ethan Zahel", dateListed: "2023-09-01" }, { id: "PR-1010", title: "Coastal Bungalow", location: "San Diego Coast, CA", type: "House", price: "$700,000", area: 1800, status: "For Rent", agent: "Ryan Frazer", dateListed: "2024-03-10" }, { id: "PR-1011", title: "Urban Studio", location: "Portland Downtown, OR", type: "Apartment", price: "$300,000", area: 900, status: "For Sale", agent: "Julian Marconi", dateListed: "2023-11-25" }, { id: "PR-1012", title: "Mountain Retreat", location: "Aspen Highlands, CO", type: "Villa", price: "$3,500,000", area: 6e3, status: "For Sale", agent: "Poppy Dalley", dateListed: "2024-04-15" }, { id: "PR-1013", title: "Corporate Office", location: "Boston Financial District, MA", type: "Office", price: "$1,500,000", area: 3500, status: "Sold", agent: "Max Boucaut", dateListed: "2023-07-20" }, { id: "PR-1014", title: "Shopping Arcade", location: "Houston Galleria, TX", type: "Shop", price: "$900,000", area: 1800, status: "For Rent", agent: "Natasha Tegg", dateListed: "2024-06-30" }, { id: "PR-1015", title: "Lakefront Cottage", location: "Lake Tahoe, NV", type: "House", price: "$1,250,000", area: 2200, status: "For Sale", agent: "Ethan Zahel", dateListed: "2023-12-10" }, { id: "PR-1016", title: "City Townhouse", location: "Philadelphia Old City, PA", type: "House", price: "$600,000", area: 2e3, status: "For Sale", agent: "Ryan Frazer", dateListed: "2024-01-05" }, { id: "PR-1017", title: "Riverside Condo", location: "Chicago Riverwalk, IL", type: "Condo", price: "$950,000", area: 2300, status: "For Rent", agent: "Julian Marconi", dateListed: "2024-07-15" }, { id: "PR-1018", title: "Tech Office", location: "Silicon Valley, CA", type: "Office", price: "$2,000,000", area: 4e3, status: "For Sale", agent: "Poppy Dalley", dateListed: "2023-10-30" }], this.bindEvents(), this.renderTable(), this.setupSortableColumns() } bindEvents() { const e = document.getElementById(this.formId); e ? e.addEventListener("submit", t => { t.preventDefault(), console.log("Form submitted"), this.saveProperty() }) : console.error("Form not found:", this.formId); const o = document.getElementById("confirmDeleteBtn"); o ? o.addEventListener("click", () => { console.log("Delete button clicked"); const t = document.getElementById("deletePropertyId").value; this.deleteProperty(t) }) : console.error("Confirm delete button not found"); const a = document.getElementById("addPropertyBtn"); a ? a.addEventListener("click", () => { console.log("Add property button clicked"), this.resetForm() }) : console.error("Add property button not found"); const n = document.getElementById(this.tableBodyId); n ? n.addEventListener("click", t => { const r = t.target.closest(".edit-btn"), d = t.target.closest(".delete-btn"); if (r) { const i = r.getAttribute("data-id"); console.log("Edit button clicked for property:", i), this.editProperty(i) } if (d) { const i = d.getAttribute("data-id"); console.log("Delete button clicked for property:", i), document.getElementById("deletePropertyId").value = i; try { new window.bootstrap.Modal(document.getElementById(this.deleteModalId)).show(), console.log("Delete modal opened") } catch (l) { console.error("Error opening delete modal:", l) } } }) : console.error("Table body not found:", this.tableBodyId) } resetForm() { console.log("Resetting form"); const e = document.getElementById("propertyForm"); e && e.reset(), document.getElementById("propertyId").value = "", document.getElementById("savePropertyBtn").textContent = "Add Property"; const o = document.getElementById("addPropertyModalLabel"); o && (o.textContent = "Add New Property") } setupSortableColumns() { document.querySelectorAll(".sortable").forEach(o => { if (o.addEventListener("click", () => { const a = o.getAttribute("data-column"); console.log("Sorting column:", a), this.sortData(a) }), !o.querySelector(".sort-icon")) { const a = document.createElement("span"); a.className = "sort-icon ms-1", a.innerHTML = '<i class="ri-arrow-up-down-line text-muted fs-sm"></i>', o.appendChild(a) } }) } sortData(e) { console.log("Sorting data by:", e, "Direction:", this.currentSortDirection), this.currentSortColumn === e ? this.currentSortDirection = this.currentSortDirection === "asc" ? "desc" : "asc" : (this.currentSortColumn = e, this.currentSortDirection = "asc"), this.updateSortIcons(e), e === "dateListed" ? this.data.sort((o, a) => { const n = new Date(o[e]), t = new Date(a[e]); return this.currentSortDirection === "asc" ? n - t : t - n }) : e === "price" || e === "area" ? this.data.sort((o, a) => { const n = e === "price" ? parseFloat(o[e].replace("$", "").replace(/,/g, "")) || 0 : o[e], t = e === "price" ? parseFloat(a[e].replace("$", "").replace(/,/g, "")) || 0 : a[e]; return this.currentSortDirection === "asc" ? n - t : t - n }) : this.data.sort((o, a) => { const n = o[e] ? o[e].toString().toLowerCase() : "", t = a[e] ? a[e].toString().toLowerCase() : ""; return this.currentSortDirection === "asc" ? n.localeCompare(t) : t.localeCompare(n) }), this.currentPage = 1, this.renderTable() } updateSortIcons(e) { document.querySelectorAll(".sortable").forEach(a => { const n = a.getAttribute("data-column"), t = a.querySelector(".sort-icon"); t && (t.innerHTML = '<i class="ri-arrow-up-down-line text-muted fs-sm"></i>', n === e && (t.innerHTML = this.currentSortDirection === "asc" ? '<i class="ri-arrow-up-line"></i>' : '<i class="ri-arrow-down-line"></i>')) }) } renderTable() {
    console.log("Rendering table"); const e = document.getElementById(this.tableBodyId); if (!e) { console.error("Table body not found:", this.tableBodyId); return } e.innerHTML = ""; const o = (this.currentPage - 1) * this.itemsPerPage, a = Math.min(o + this.itemsPerPage, this.data.length), n = this.data.slice(o, a); document.getElementById(this.paginationInfoId).innerHTML = `Showing <b class="me-1">${o + 1}-${a}</b> of <b class="ms-1">${this.data.length}</b> Results`, n.length === 0 ? e.innerHTML = '<tr><td colspan="11" class="text-center">No property records found</td></tr>' : n.forEach(t => {
      const r = document.createElement("tr"); r.innerHTML = `
          <td>
            <div class="form-check check-primary">
              <input class="form-check-input" type="checkbox" aria-label="checkbox">
              <label class="form-check-label d-none">Check All Data</label>
            </div>
          </td>
          <td>${t.id}</td>
          <td>
            <a href="apps-property-details.html" class="text-reset">${t.title}</a>
          </td>
          <td>${t.location}</td>
          <td>${t.type}</td>
          <td>${t.price}</td>
          <td>${t.area}</td>
          <td>
            <span class="badge bg-${t.status === "For Sale" ? "success" : t.status === "For Rent" ? "danger" : "secondary"}-subtle text-${t.status === "For Sale" ? "success" : t.status === "For Rent" ? "danger" : "secondary"} border border-${t.status === "For Sale" ? "success" : t.status === "For Rent" ? "danger" : "secondary"}-subtle">
              ${t.status}
            </span>
          </td>
          <td>${t.agent}</td>
          <td>${this.formatDate(t.dateListed)}</td>
          <td>
            <div class="d-flex align-items-center gap-2">
              <button class="btn btn-sub-primary size-8 btn-icon edit-btn" aria-label="edit-button" data-id="${t.id}">
                <i class="ri-edit-line"></i>
              </button>
              <button class="btn btn-sub-danger size-8 btn-icon delete-btn" aria-label="delete-button" data-id="${t.id}">
                <i class="ri-delete-bin-line"></i>
              </button>
            </div>
          </td>
        `, e.appendChild(r)
    }), this.renderPagination()
  } formatDate(e) { const o = new Date(e), a = { day: "numeric", month: "short", year: "numeric" }; return o.toLocaleDateString("en-US", a) } renderPagination() { console.log("Rendering pagination"); const e = document.getElementById(this.paginationId); if (!e) { console.error("Pagination element not found:", this.paginationId); return } e.innerHTML = ""; const o = Math.ceil(this.data.length / this.itemsPerPage), a = document.createElement("li"); a.className = `page-item ${this.currentPage === 1 ? "disabled" : ""}`, a.innerHTML = '<a class="page-link" href="#!"><i data-lucide="chevron-left" class="size-4"></i> Previous</a>', a.addEventListener("click", t => { t.preventDefault(), this.currentPage > 1 && (this.currentPage--, this.renderTable()) }), e.appendChild(a); for (let t = 1; t <= o; t++) { const r = document.createElement("li"); r.className = `page-item ${t === this.currentPage ? "active" : ""}`, r.innerHTML = `<a class="page-link" href="#!">${t}</a>`, r.addEventListener("click", d => { d.preventDefault(), this.currentPage = t, this.renderTable() }), e.appendChild(r) } const n = document.createElement("li"); n.className = `page-item ${this.currentPage === o ? "disabled" : ""}`, n.innerHTML = '<a class="page-link" href="#!">Next <i data-lucide="chevron-right" class="size-4"></i></a>', n.addEventListener("click", t => { t.preventDefault(), this.currentPage < o && (this.currentPage++, this.renderTable()) }), e.appendChild(n), s({ icons: c }) } editProperty(e) { console.log("Attempting to edit property:", e); const o = this.data.find(a => a.id === e); if (!o) { console.error(`Property with ID ${e} not found`); return } try { document.getElementById("propertyId").value = o.id, document.getElementById("propertyTitle").value = o.title, document.getElementById("propertyType").value = o.type, document.getElementById("propertyLocation").value = o.location, document.getElementById("propertyPrice").value = o.price, document.getElementById("propertyArea").value = o.area, document.getElementById("propertyStatus").value = o.status, document.getElementById("propertyAgent").value = o.agent, document.getElementById("propertyDateListed").value = this.formatDate(o.dateListed), document.getElementById("savePropertyBtn").textContent = "Update Property"; const a = document.getElementById("addPropertyModalLabel"); a && (a.textContent = "Edit Property"); const n = document.getElementById(this.modalId); n ? (new window.bootstrap.Modal(n).show(), console.log("Edit modal opened successfully")) : console.error("Modal element not found:", this.modalId) } catch (a) { console.error("Error in editProperty:", a) } } saveProperty() { console.log("Saving property"); const e = document.getElementById("propertyId").value, o = e !== "", a = { id: o ? e : `PR-${1e3 + this.data.length + 1}`, title: document.getElementById("propertyTitle").value, type: document.getElementById("propertyType").value, location: document.getElementById("propertyLocation").value, price: document.getElementById("propertyPrice").value, area: parseInt(document.getElementById("propertyArea").value) || 0, status: document.getElementById("propertyStatus").value, agent: document.getElementById("propertyAgent").value, dateListed: document.getElementById("propertyDateListed").value }; if (o) { const n = this.data.findIndex(t => t.id === e); n !== -1 && (this.data[n] = { ...this.data[n], ...a }, console.log("Property updated:", a)) } else this.data.unshift(a), console.log("Property added:", a); try { const n = window.bootstrap.Modal.getInstance(document.getElementById(this.modalId)); n && (n.hide(), console.log("Modal closed after saving")) } catch (n) { console.error("Error hiding modal:", n) } this.resetForm(), this.renderTable() } deleteProperty(e) { console.log("Deleting property:", e), this.data = this.data.filter(a => a.id !== e); try { const a = window.bootstrap.Modal.getInstance(document.getElementById(this.deleteModalId)); a && (a.hide(), console.log("Delete modal closed")) } catch (a) { console.error("Error hiding delete modal:", a) } const o = Math.ceil(this.data.length / this.itemsPerPage); this.currentPage > o && o > 0 && (this.currentPage = o), this.renderTable() }
} new u("#propertyDateListed", { dateFormat: "dd MMM, yyyy", autoClose: !0, position: "bottom left", locale: { days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], daysShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], daysMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"], months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], monthsShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], today: "Today", clear: "Clear", firstDay: 0 } }); VirtualSelect.init({ ele: "#propertyType", options: [{ label: "Apartment", value: "1" }, { label: "Villa", value: "2" }, { label: "Office", value: "3" }, { label: "Shop", value: "4" }, { label: "Condo", value: "5" }], selectedValue: 0 }); VirtualSelect.init({ ele: "#propertyStatus", options: [{ label: "For Sale", value: "1" }, { label: "For Rent", value: "2" }, { label: "Sold", value: "3" }], selectedValue: 0 }); document.addEventListener("DOMContentLoaded", () => { console.log("DOM loaded, initializing TableManager"), new p({ tableBodyId: "propertyTableBody", paginationId: "pagination", paginationInfoId: "paginationInfo", formId: "propertyForm", modalId: "addPropertyModal", deleteModalId: "deleteModal", itemsPerPage: 10 }) });
