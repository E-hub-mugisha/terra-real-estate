import"../../admin.bundle-CEbNEZ37.js";/* empty css                               */import"../../main-O_SKZbQk.js";document.addEventListener("DOMContentLoaded",function(){var l=new Date().getFullYear(),i=new Date().getMonth(),f=document.getElementById("external-events");new FullCalendar.Draggable(f,{itemSelector:".draggable-event",eventData:function(t){var n=t.querySelector(".fc-event-main");if(!n)return console.error("Event title element not found"),{title:"Untitled Event"};var e="bg-secondary";return t.classList.contains("btn-primary")&&(e="bg-primary"),t.classList.contains("btn-danger")&&(e="bg-danger"),t.classList.contains("btn-warning")&&(e="bg-warning"),{title:n.textContent,backgroundColor:e.replace("bg-",""),className:e+" text-white p-2 rounded-2"}}});var w=document.getElementById("calendar"),v=new FullCalendar.Calendar(w,{timeZone:"local",initialView:"dayGridMonth",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},events:[{id:"1",title:"Property Showing",start:new Date(l,i,1),backgroundColor:"secondary",borderColor:"secondary",className:"bg-secondary text-white p-2 rounded-2",extendedProps:{eventType:"Property Showing",propertyAddress:"123 Maple St, New York",clients:[]}},{id:"2",title:"Open House",start:new Date(l,i,27),backgroundColor:"primary",borderColor:"primary",className:"bg-primary text-white p-2 rounded-2",extendedProps:{eventType:"Open House",propertyAddress:"456 Oak, London",clients:[]}},{id:"3",title:"Client Meeting",start:new Date(l,i,14),backgroundColor:"danger",borderColor:"danger",className:"bg-danger text-white p-2 rounded-2",extendedProps:{eventType:"Client Meeting",propertyAddress:"Office, Angeles, USA",clients:[]}},{id:"4",title:"Inspection",start:new Date(l,i,10),backgroundColor:"warning",borderColor:"warning",className:"bg-warning text-white p-2 rounded-2",extendedProps:{eventType:"Inspection",propertyAddress:"789 Pine Rd, USA",clients:[]}},{id:"5",title:"Open House",start:new Date(l,i,23),backgroundColor:"primary",borderColor:"primary",className:"bg-primary text-white p-2 rounded-2",extendedProps:{eventType:"Open House",propertyAddress:"101 Birch Ln, UK",clients:[]}},{id:"6",title:"Property Showing",start:new Date(l,i,18),backgroundColor:"secondary",borderColor:"secondary",className:"bg-secondary text-white p-2 rounded-2",extendedProps:{eventType:"Property Showing",propertyAddress:"321 Elm St, NY, USA",clients:[]}},{id:"7",title:"Open House",start:new Date(l,i,5),backgroundColor:"primary",borderColor:"primary",className:"bg-primary text-white p-2 rounded-2",extendedProps:{eventType:"Open House",propertyAddress:"654 Cedar Ave, London, UK",clients:[]}}],editable:!0,droppable:!0,eventContent:function(t){var a;const n=document.createElement("div");n.classList.add("overflow-hidden");const e=document.createElement("div");e.classList.add("fc-event-title","text-truncate","text-white","fs-sm","fw-semibold"),e.innerText=t.event.title;const r=document.createElement("div");return r.classList.add("text-truncate","text-white","fs-13","opacity-75"),r.innerText=((a=t.event.extendedProps)==null?void 0:a.propertyAddress)||"",n.appendChild(e),n.appendChild(r),{domNodes:[n]}},dateClick:function(t){m();var n=new window.bootstrap.Modal(document.getElementById("addEventModal"));document.getElementById("eventDateInput").value=t.dateStr,document.getElementById("endEventDateInput").value=t.dateStr,document.getElementById("modalTitle").textContent="Add Event",document.getElementById("submitEventBtn").textContent="Create Event",document.getElementById("eventForm").removeAttribute("data-event-id"),n.show()},eventClick:function(t){var d,c;m();var n=new window.bootstrap.Modal(document.getElementById("addEventModal"));document.getElementById("modalTitle").textContent="Edit Event",document.getElementById("submitEventBtn").textContent="Update Event";const e=t.event;document.getElementById("eventNameInput").value=e.title,document.getElementById("propertyAddressInput").value=((d=e.extendedProps)==null?void 0:d.propertyAddress)||"";const r=e.start?y(e.start):"";document.getElementById("eventDateInput").value=r;const a=e.end?y(e.end):r;if(document.getElementById("endEventDateInput").value=a,!e.allDay&&e.start){const u=e.start.getHours().toString().padStart(2,"0"),p=e.start.getMinutes().toString().padStart(2,"0");document.getElementById("eventTimeInput").value=`${u}:${p}`}else document.getElementById("eventTimeInput").value="";document.getElementById("eventForm").setAttribute("data-event-id",e.id),C(((c=e.extendedProps)==null?void 0:c.clients)||[]),n.show()},drop:function(t){}});v.render();function y(t){const n=t.getFullYear(),e=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getDate().toString().padStart(2,"0");return`${n}-${e}-${r}`}function m(){document.getElementById("eventForm").reset(),document.getElementById("clientList").innerHTML=""}function C(t){const n=document.getElementById("clientList");n.innerHTML="",t&&t.length>0&&t.forEach(e=>{const r=E(e.email,e.avatarId);n.appendChild(r)})}function E(t,n){const e=document.createElement("div");e.className="position-relative rounded-circle size-9",e.setAttribute("data-email",t);const r=document.createElement("img");r.src=`assets/images/avatar/user-${n}.png`,r.alt=t,r.className="size-9 rounded-circle";const a=document.createElement("a");return a.href="#!",a.className="position-absolute d-inline-flex align-items-center justify-content-center text-white bg-dark fs-13 border-2 rounded-circle size-4 top-0 end-0 me-n1 mt-n1",a.innerHTML='<i class="text-xs ri-close-line"></i>',a.addEventListener("click",function(d){d.preventDefault(),e.remove()}),e.appendChild(r),e.appendChild(a),e}document.getElementById("addClientBtn").addEventListener("click",function(){const t=document.getElementById("clientInput"),n=t.value.trim();if(n&&h(n)){const e=Math.floor(Math.random()*30)+1,r=E(n,e);document.getElementById("clientList").appendChild(r),t.value=""}else alert("Please enter a valid email address")});function h(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}if(document.getElementById("eventForm").addEventListener("submit",function(t){t.preventDefault();const n=document.getElementById("eventNameInput").value,e=document.getElementById("propertyAddressInput").value,r=document.getElementById("eventDateInput").value,a=document.getElementById("endEventDateInput").value,d=document.getElementById("eventTimeInput").value,c=this.getAttribute("data-event-id");let u="primary";if(typeof VirtualSelect<"u"){const o=document.querySelector("#ColorSelect").querySelector(".vscomp-value-tag");o&&(u=o.getAttribute("data-value")||"primary")}let p=new Date(r),I=new Date(a||r);if(d){const[o,s]=d.split(":");p.setHours(parseInt(o),parseInt(s)),I.setHours(parseInt(o),parseInt(s))}const B=document.getElementById("clientList").querySelectorAll("[data-email]"),x=Array.from(B).map(o=>{const s=o.getAttribute("data-email"),b=o.querySelector("img").src,D=b.match(/user-(\d+)\.png/)?parseInt(b.match(/user-(\d+)\.png/)[1]):1;return{email:s,avatarId:D}}),g={title:n,start:p,end:I,allDay:!d,backgroundColor:u,className:"bg-"+u+" text-white p-2 rounded-2",extendedProps:{propertyAddress:e,clients:x}};if(n&&e){if(c){const s=v.getEventById(c);s&&s.remove(),g.id=c}else g.id="event-"+new Date().getTime();v.addEvent(g),window.bootstrap.Modal.getInstance(document.getElementById("addEventModal")).hide(),m()}else alert("Please fill in both Event Name and Property Address.")}),document.getElementById("newEvent").addEventListener("click",function(){const t=new Date().toISOString().split("T")[0];document.getElementById("eventDateInput").value=t,document.getElementById("endEventDateInput").value=t,m(),document.getElementById("modalTitle").textContent="Add Event",document.getElementById("submitEventBtn").textContent="Create Event",document.getElementById("eventForm").removeAttribute("data-event-id")}),typeof VirtualSelect<"u")VirtualSelect.init({ele:"#ColorSelect",options:[{label:"Property Showing",value:"primary"},{label:"Open House",value:"success"},{label:"Client Meeting",value:"info"},{label:"Inspection",value:"warning"}],search:!1,defaultValue:"primary"});else{console.error("VirtualSelect is not loaded");const t=document.getElementById("ColorSelect");if(t){const n=document.createElement("select");n.className="form-select",n.id="EventTypeSelectFallback",[{label:"Property Showing",value:"primary"},{label:"Open House",value:"success"},{label:"Client Meeting",value:"info"},{label:"Inspection",value:"warning"}].forEach(r=>{const a=document.createElement("option");a.value=r.value,a.textContent=r.label,n.appendChild(a)}),t.parentNode.replaceChild(n,t)}}});
