import{c as m,a as g}from"../../admin.bundle-CEbNEZ37.js";/* empty css                               */import{A as h}from"../../air-datepicker-C9mgs6L9.js";import{l as b,a as f,b as v,c as I,d as E,e as D,f as C,g as S,h as T,i as B,j as w,k as M,m as A,n as q,o as L,p as k,q as R,r as x,s as P,t as $,u as H,v as N,w as Q,x as V,y as F,z as J,A as z,B as W,C as O,E as j,D as K,F as U}from"../../zh-DPqyS2Xf.js";import"../../anime.es-DjbxoOUh.js";import{l as p}from"../../en-C6E2-gVo.js";import"../../main-O_SKZbQk.js";import"../../_commonjsHelpers-CqkleIqs.js";document.addEventListener("DOMContentLoaded",function(){const c=document.querySelectorAll("[data-datepicker]"),e={ar:O,bg:W,ca:z,cs:J,da:F,de:V,el:Q,en:p,es:N,eu:H,fi:$,fr:P,hr:x,hu:R,id:k,it:L,ja:q,ko:A,nb:M,nl:w,pl:B,pt:T,ro:S,ru:C,sk:D,sv:E,th:I,tr:v,uk:f,zh:b};(c||[]).forEach(function(t){const a=t.getAttribute("data-language")||"en",n={dateFormat:t.getAttribute("data-date-format")||"yyyy-MM-dd",locale:e[a]||p,autoClose:t.getAttribute("data-auto-close")==="true",view:t.getAttribute("data-view")||"days",minView:t.getAttribute("data-min-view")||"days",isMobile:t.getAttribute("data-mobile")==="true",inline:t.getAttribute("data-inline")==="true",onSelect:function(s,o,i){}};if(t.getAttribute("data-timepicker")==="true"&&(n.timepicker=!0,n.timeFormat=t.getAttribute("data-time-format")||"hh:mm AA"),t.getAttribute("data-multiple-dates")==="true"&&(n.multipleDates=!0),t.getAttribute("data-min-date")&&(n.minDate=new Date(t.getAttribute("data-min-date"))),t.getAttribute("data-max-date")&&(n.maxDate=new Date(t.getAttribute("data-max-date"))),t.getAttribute("data-selected-dates")&&(n.selectedDates=t.getAttribute("data-selected-dates").split(",").map(s=>new Date(s.trim()))),t.getAttribute("data-range")==="true"&&(n.range=!0),t.getAttribute("data-disabled-date")){const s=new Date(t.getAttribute("data-disabled-date").trim()),o=({date:i,datepicker:r})=>{const l=r.selectedDates[0];if(l&&r.selectedDates.length===1){const d=[l,i].sort((u,y)=>u.getTime()>y.getTime()?1:-1);return U(s,{start:d[0],end:d[1]})}return!1};n.onBeforeSelect=({date:i,datepicker:r})=>!o({date:i,datepicker:r}),n.onFocus=({date:i,datepicker:r})=>{o({date:i,datepicker:r})||j(i,s)?r.$datepicker.classList.add("-disabled-range-"):r.$datepicker.classList.remove("-disabled-range-")},n.onRenderCell=({date:i})=>i.toLocaleDateString()===s.toLocaleDateString()?{disabled:!0}:{}}n.position=function({$datepicker:s,$target:o,$pointer:i,isViewChange:r,done:l}){let d=K(o,s,{placement:"bottom",modifiers:[{name:"flip",options:{padding:{top:64}}},{name:"offset",options:{offset:[0,20]}},{name:"arrow",options:{element:i}}]});return function(){d.destroy(),l()}},new h(t,n)})});VirtualSelect.init({ele:"#sample-select",options:[{label:"Inquiry",value:"1"},{label:"Site Visit",value:"2"},{label:"Negotiation",value:"3"},{label:"Closed",value:"3"},{label:"Lost",value:"3"}],selectedValue:0});class G{constructor(e){this.tableBodyId=e.tableBodyId,this.paginationId=e.paginationId,this.paginationInfoId=e.paginationInfoId,this.formId=e.formId,this.modalId=e.modalId,this.deleteModalId=e.deleteModalId,this.itemsPerPage=e.itemsPerPage||10,this.currentPage=1,this.currentSortColumn=null,this.currentSortDirection="asc",this.data=[{id:"REQ-1001",name:"Robert Johnson",propertyType:"Villa",message:"Interested in beachfront villas in Malibu.",status:"Inquiry",requestDate:"2024-01-15",image:"assets/images/avatar/user-3.png"},{id:"REQ-1002",name:"Sarah Williams",propertyType:"Apartment",message:"Looking for a 2BHK in downtown.",status:"Site Visit",requestDate:"2024-02-01",image:"assets/images/avatar/user-2.png"},{id:"REQ-1003",name:"Michael Brown",propertyType:"Commercial",message:"Need office space for 50 employees.",status:"Negotiation",requestDate:"2024-03-12",image:""},{id:"REQ-1004",name:"Emily Davis",propertyType:"House",message:"Seeking a family home with a garden.",status:"Closed",requestDate:"2024-04-22",image:"assets/images/avatar/user-24.png"},{id:"REQ-1005",name:"James Wilson",propertyType:"Land",message:"Interested in land for development.",status:"Inquiry",requestDate:"2024-05-30",image:"assets/images/avatar/user-25.png"},{id:"REQ-1006",name:"Jennifer Martinez",propertyType:"Apartment",message:"Looking for a penthouse with city view.",status:"Site Visit",requestDate:"2024-06-05",image:"assets/images/avatar/user-26.png"},{id:"REQ-1007",name:"David Anderson",propertyType:"Office Space",message:"Need office in business district.",status:"Negotiation",requestDate:"2024-07-18",image:""},{id:"REQ-1008",name:"Lisa Taylor",propertyType:"Villa",message:"Interested in luxury villa with pool.",status:"Closed",requestDate:"2024-08-14",image:"assets/images/avatar/user-27.png"},{id:"REQ-1009",name:"Christopher Moore",propertyType:"House",message:"Looking for a suburban home.",status:"Lost",requestDate:"2024-09-08",image:""},{id:"REQ-1010",name:"Patricia Garcia",propertyType:"Apartment",message:"Interested in a studio apartment.",status:"Inquiry",requestDate:"2024-10-20",image:"assets/images/avatar/user-28.png"},{id:"REQ-1011",name:"Robert Johnson",propertyType:"Villa",message:"Interested in beachfront villas in Malibu.",status:"Inquiry",requestDate:"2024-11-12",image:"assets/images/avatar/user-29.png"},{id:"REQ-1012",name:"Sarah Williams",propertyType:"Apartment",message:"Looking for a 2BHK in downtown.",status:"Site Visit",requestDate:"2024-12-05",image:"assets/images/avatar/user-30.png"},{id:"REQ-1013",name:"Michael Brown",propertyType:"Commercial",message:"Need office space for 50 employees.",status:"Negotiation",requestDate:"2025-01-18",image:""},{id:"REQ-1014",name:"Emily Davis",propertyType:"House",message:"Seeking a family home with a garden.",status:"Closed",requestDate:"2025-02-10",image:"assets/images/avatar/user-31.png"},{id:"REQ-1015",name:"James Wilson",propertyType:"Land",message:"Interested in land for development.",status:"Inquiry",requestDate:"2025-03-25",image:"assets/images/avatar/user-32.png"},{id:"REQ-1016",name:"Jennifer Martinez",propertyType:"Apartment",message:"Looking for a penthouse with city view.",status:"Site Visit",requestDate:"2025-04-15",image:"assets/images/avatar/user-33.png"},{id:"REQ-1017",name:"David Anderson",propertyType:"Office Space",message:"Need office in business district.",status:"Negotiation",requestDate:"2025-05-05",image:""},{id:"REQ-1018",name:"Lisa Taylor",propertyType:"Villa",message:"Interested in luxury villa with pool.",status:"Closed",requestDate:"2025-06-20",image:"assets/images/avatar/user-34.png"},{id:"REQ-1019",name:"Christopher Moore",propertyType:"House",message:"Looking for a suburban home.",status:"Lost",requestDate:"2025-07-10",image:""},{id:"REQ-1020",name:"Patricia Garcia",propertyType:"Apartment",message:"Interested in a studio apartment.",status:"Inquiry",requestDate:"2025-08-30",image:"assets/images/avatar/user-35.png"},{id:"REQ-1021",name:"Robert Johnson",propertyType:"Villa",message:"Interested in beachfront villas in Malibu.",status:"Inquiry",requestDate:"2025-09-15",image:"assets/images/avatar/user-36.png"},{id:"REQ-1022",name:"Sarah Williams",propertyType:"Apartment",message:"Looking for a 2BHK in downtown.",status:"Site Visit",requestDate:"2025-10-05",image:"assets/images/avatar/user-37.png"},{id:"REQ-1023",name:"Michael Brown",propertyType:"Commercial",message:"Need office space for 50 employees.",status:"Negotiation",requestDate:"2025-11-20",image:""},{id:"REQ-1024",name:"Emily Davis",propertyType:"House",message:"Seeking a family home with a garden.",status:"Closed",requestDate:"2025-12-10",image:"assets/images/avatar/user-38.png"},{id:"REQ-1025",name:"James Wilson",propertyType:"Land",message:"Interested in land for development.",status:"Inquiry",requestDate:"2026-01-25",image:"assets/images/avatar/user-39.png"}],this.bindEvents(),this.setupSortableColumns(),this.setupCheckboxes(),this.renderTable(),m({icons:g})}bindEvents(){const e=document.getElementById(this.formId);e?e.addEventListener("submit",s=>{s.preventDefault(),console.log("Form submitted"),this.saveContact()}):console.error("Form not found:",this.formId);const t=document.getElementById("confirmDeleteBtn");t?t.addEventListener("click",()=>{console.log("Delete button clicked");const s=document.getElementById("deleteContactId").value;this.deleteContact(s)}):console.error("Confirm delete button not found");const a=document.getElementById("addContactBtn");a?a.addEventListener("click",()=>{console.log("Add contact button clicked"),this.resetForm()}):console.error("Add contact button not found");const n=document.getElementById(this.tableBodyId);n?n.addEventListener("click",s=>{const o=s.target.closest(".edit-btn"),i=s.target.closest(".delete-btn");if(o){const r=o.getAttribute("data-id");console.log("Edit button clicked for contact:",r),this.editContact(r)}if(i){const r=i.getAttribute("data-id");console.log("Delete button clicked for contact:",r),document.getElementById("deleteContactId").value=r;try{new window.bootstrap.Modal(document.getElementById(this.deleteModalId)).show(),console.log("Delete modal opened")}catch(l){console.error("Error opening delete modal:",l)}}}):console.error("Table body not found:",this.tableBodyId)}resetForm(){console.log("Resetting form");const e=document.getElementById("contactForm");e&&e.reset(),document.getElementById("contactId").value="",document.getElementById("saveContactBtn").textContent="Save Contact Request";const t=document.getElementById("addContactModalLabel");t&&(t.textContent="Add New Contact Request")}setupSortableColumns(){document.querySelectorAll(".sortable").forEach(t=>{if(t.addEventListener("click",()=>{const a=t.getAttribute("data-column");console.log("Sorting column:",a),this.sortData(a)}),!t.querySelector(".sort-icon")){const a=document.createElement("span");a.className="sort-icon ms-1",a.innerHTML='<i class="ri-arrow-up-down-line text-muted fs-sm"></i>',t.appendChild(a)}})}sortData(e){console.log("Sorting data by:",e,"Direction:",this.currentSortDirection),this.currentSortColumn===e?this.currentSortDirection=this.currentSortDirection==="asc"?"desc":"asc":(this.currentSortColumn=e,this.currentSortDirection="asc"),this.updateSortIcons(e),e==="requestDate"?this.data.sort((t,a)=>{const n=new Date(t[e]),s=new Date(a[e]);return this.currentSortDirection==="asc"?n-s:s-n}):this.data.sort((t,a)=>{const n=t[e]?t[e].toString().toLowerCase():"",s=a[e]?a[e].toString().toLowerCase():"";return this.currentSortDirection==="asc"?n.localeCompare(s):s.localeCompare(n)}),this.currentPage=1,this.renderTable()}updateSortIcons(e){document.querySelectorAll(".sortable").forEach(a=>{const n=a.getAttribute("data-column"),s=a.querySelector(".sort-icon");s&&(s.innerHTML='<i class="ri-arrow-up-down-line text-muted fs-sm"></i>',n===e&&(s.innerHTML=this.currentSortDirection==="asc"?'<i class="ri-arrow-up-line text-muted"></i>':'<i class="ri-arrow-down-line text-muted"></i>'))})}getStatusBadge(e){return`<span class="badge ${{Inquiry:"bg-info-subtle text-info","Site Visit":"bg-warning-subtle text-warning",Negotiation:"bg-primary-subtle text-primary",Closed:"bg-success-subtle text-success",Lost:"bg-danger-subtle text-danger"}[e]||"bg-secondary-subtle text-secondary"}">${e}</span>`}formatDate(e){const t=new Date(e),a={day:"numeric",month:"short",year:"numeric"};return t.toLocaleDateString("en-US",a)}renderCustomerAvatar(e){return e.image?`<img src="${e.image}" loading="lazy" alt="${e.name}" class="size-10 rounded-circle">`:`<div class="size-10 bg-light-subtle rounded-circle text-muted fs-sm fw-semibold d-flex justify-content-center align-items-center">
                                ${this.getInitials(e.name)}
                            </div>`}getInitials(e){return e.split(" ").map(t=>t.charAt(0)).join("").toUpperCase()}setupCheckboxes(){const e=document.getElementById("checkAll");e?e.addEventListener("change",()=>{console.log("Check All toggled"),document.querySelectorAll("#customerTableBody .form-check-input").forEach(a=>{a.checked=e.checked})}):console.error("Check All checkbox not found")}renderTable(){console.log("Rendering table");const e=document.getElementById(this.tableBodyId);if(!e){console.error("Table body not found:",this.tableBodyId);return}e.innerHTML="";const t=(this.currentPage-1)*this.itemsPerPage,a=Math.min(t+this.itemsPerPage,this.data.length),n=this.data.slice(t,a);document.getElementById(this.paginationInfoId).innerHTML=`Showing <b class="me-1">${t+1}-${a}</b> of <b class="ms-1">${this.data.length}</b> Results`,n.length===0?e.innerHTML='<tr><td colspan="8" class="text-center">No contact requests found</td></tr>':n.forEach(s=>{const o=document.createElement("tr");o.innerHTML=`
                            <td>
                                <div class="form-check check-primary">
                                    <input class="form-check-input" type="checkbox" aria-label="Select ${s.id}">
                                    <label class="form-check-label d-none">Select ${s.id}</label>
                                </div>
                            </td>
                            <td>${s.id}</td>
                            <td>
                                <div class="d-flex align-items-center gap-3">
                                    ${this.renderCustomerAvatar(s)}
                                    <div>
                                        <h6 class="mb-1"><a href="apps-customer-details.html" class="text-reset">${s.name}</a></h6>
                                    </div>
                                </div>
                            </td>
                            <td>${s.propertyType}</td>
                            <td>${s.message}</td>
                            <td>${this.getStatusBadge(s.status)}</td>
                            <td>${this.formatDate(s.requestDate)}</td>
                            <td>
                                <div class="d-flex align-items-center gap-2">
                                    <button class="btn btn-sub-primary size-8 btn-icon edit-btn" data-id="${s.id}">
                                        <i class="ri-edit-line"></i>
                                    </button>
                                    <button class="btn btn-sub-danger size-8 btn-icon delete-btn" data-id="${s.id}">
                                        <i class="ri-delete-bin-line"></i>
                                    </button>
                                </div>
                            </td>
                        `,e.appendChild(o)}),this.renderPagination()}renderPagination(){console.log("Rendering pagination");const e=document.getElementById(this.paginationId);if(!e){console.error("Pagination element not found:",this.paginationId);return}e.innerHTML="";const t=Math.ceil(this.data.length/this.itemsPerPage),a=document.createElement("li");a.className=`page-item ${this.currentPage===1?"disabled":""}`,a.innerHTML='<a class="page-link" href="#!"><i data-lucide="chevron-left" class="size-4"></i> Previous</a>',a.addEventListener("click",s=>{s.preventDefault(),this.currentPage>1&&(this.currentPage--,this.renderTable())}),e.appendChild(a);for(let s=1;s<=t;s++){const o=document.createElement("li");o.className=`page-item ${s===this.currentPage?"active":""}`,o.innerHTML=`<a class="page-link" href="#!">${s}</a>`,o.addEventListener("click",i=>{i.preventDefault(),this.currentPage=s,this.renderTable()}),e.appendChild(o)}const n=document.createElement("li");n.className=`page-item ${this.currentPage===t?"disabled":""}`,n.innerHTML='<a class="page-link" href="#!">Next <i data-lucide="chevron-right" class="size-4"></i></a>',n.addEventListener("click",s=>{s.preventDefault(),this.currentPage<t&&(this.currentPage++,this.renderTable())}),e.appendChild(n),m({icons:g})}editContact(e){console.log("Attempting to edit contact:",e);const t=this.data.find(a=>a.id===e);if(!t){console.error(`Contact with ID ${e} not found`);return}try{document.getElementById("contactId").value=t.id,document.getElementById("customerName").value=t.name,document.getElementById("propertyType").value=t.propertyType,document.getElementById("message").value=t.message,document.getElementById("status").value=t.status,document.getElementById("requestDate").value=t.requestDate,document.getElementById("saveContactBtn").textContent="Update Contact Request";const a=document.getElementById("addContactModalLabel");a&&(a.textContent="Edit Contact Request");const n=document.getElementById(this.modalId);n?(new window.bootstrap.Modal(n).show(),console.log("Edit modal opened successfully")):console.error("Modal element not found:",this.modalId)}catch(a){console.error("Error in editContact:",a)}}saveContact(){console.log("Saving contact");const e=document.getElementById("contactId").value,t=e!=="",a={id:t?e:`REQ-${1e3+this.data.length+1}`,name:document.getElementById("customerName").value,propertyType:document.getElementById("propertyType").value,message:document.getElementById("message").value,status:document.getElementById("status").value,requestDate:document.getElementById("requestDate").value,image:t?this.data.find(n=>n.id===e).image:""};if(t){const n=this.data.findIndex(s=>s.id===e);n!==-1&&(this.data[n]=a,console.log("Contact updated:",a))}else this.data.unshift(a),console.log("Contact added:",a);try{const n=window.bootstrap.Modal.getInstance(document.getElementById(this.modalId));n&&(n.hide(),console.log("Modal closed after saving"))}catch(n){console.error("Error hiding modal:",n)}this.resetForm(),this.renderTable()}deleteContact(e){console.log("Deleting contact:",e),this.data=this.data.filter(a=>a.id!==e);try{const a=window.bootstrap.Modal.getInstance(document.getElementById(this.deleteModalId));a&&(a.hide(),console.log("Delete modal closed"))}catch(a){console.error("Error hiding delete modal:",a)}const t=Math.ceil(this.data.length/this.itemsPerPage);this.currentPage>t&&t>0&&(this.currentPage=t),this.renderTable()}}new h("#requestDate",{dateFormat:"yyyy-MM-dd",autoClose:!0,position:"bottom left",locale:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",firstDay:0}});VirtualSelect.init({ele:"#propertyType",options:[{label:"Apartment",value:"1"},{label:"Villa",value:"2"},{label:"Office",value:"3"},{label:"Shop",value:"4"},{label:"Condo",value:"5"}],selectedValue:0});VirtualSelect.init({ele:"#status",options:[{label:"Inquiry",value:"1"},{label:"Site Visit",value:"2"},{label:"Negotiation",value:"3"},{label:"Closed",value:"4"},{label:"Lost",value:"5"}],selectedValue:0});document.addEventListener("DOMContentLoaded",()=>{console.log("DOM loaded, initializing TableManager"),new G({tableBodyId:"customerTableBody",paginationId:"pagination",paginationInfoId:"paginationInfo",formId:"contactForm",modalId:"addContactModal",deleteModalId:"deleteModal",itemsPerPage:10})});
