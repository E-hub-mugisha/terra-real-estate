import"../../admin.bundle-CEbNEZ37.js";/* empty css                               */import"../../main-O_SKZbQk.js";document.addEventListener("DOMContentLoaded",function(){var l=new Date().getFullYear(),d=new Date().getMonth(),p=document.querySelector(".btn-info .fc-event-mai");p&&(p.textContent="Festival Function",p.className="fc-event-main fs-13");var f=document.getElementById("external-events");new FullCalendar.Draggable(f,{itemSelector:".draggable-event",eventData:function(e){var n=e.querySelector(".fc-event-main");if(!n)return console.error("Event title element not found"),{title:"Untitled Event"};var t="bg-primary";e.classList.contains("btn-primary")&&(t="bg-primary"),e.classList.contains("btn-info")&&(t="bg-info"),e.classList.contains("btn-pink")&&(t="bg-pink"),e.classList.contains("btn-indigo")&&(t="bg-indigo");var a=t.replace("bg-","");return{title:n.textContent,className:"bg-"+a+"-subtle text-"+a+" ps-5 px-3 py-10px rounded-2"}}});var B=document.getElementById("calendar"),v=new FullCalendar.Calendar(B,{timeZone:"local",initialView:"dayGridMonth",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},events:[{id:"1",title:"Meeting",start:new Date(l,d,1),className:"bg-pink-subtle text-pink ps-5 px-3 py-10px rounded-2",extendedProps:{location:"surat",guests:[]}},{id:"2",title:"Update Weekly",start:new Date(l,d,7),className:"bg-primary-subtle text-primary ps-5 px-3 py-10px rounded-2",extendedProps:{location:"surat",guests:[]}},{id:"3",title:"Family Dinner",start:new Date(l,d,14),className:"bg-info-subtle text-info ps-5 px-3 py-10px rounded-2",extendedProps:{location:"surat",guests:[]}},{id:"4",title:"School Reunion",start:new Date(l,d,10),className:"bg-indigo-subtle text-indigo ps-5 px-3 py-10px rounded-2",extendedProps:{location:"surat",guests:[]}},{id:"5",title:"Holiday Tour",start:new Date(l,d,14),className:"bg-pink-subtle text-pink ps-5 px-3 py-10px rounded-2",extendedProps:{location:"surat",guests:[]}},{id:"6",title:"Meeting",start:new Date(l,d,23),className:"bg-pink-subtle text-pink ps-5 px-3 py-10px rounded-2",extendedProps:{location:"surat",guests:[]}},{id:"7",title:"Marriage Function",start:new Date(l,d,18),className:"bg-info-subtle text-info ps-5 px-3 py-10px rounded-2",extendedProps:{location:"surat",guests:[]}},{id:"8",title:"Family Dinner",start:new Date(l,d,27),className:"bg-info-subtle text-info ps-5 px-3 py-10px rounded-2",extendedProps:{location:"surat",guests:[]}},{id:"9",title:"Company Meeting",start:new Date(l,d,31),className:"bg-primary-subtle text-primary ps-5 px-3 py-10px rounded-2",extendedProps:{location:"surat",guests:[]}}],editable:!0,droppable:!0,eventContent:function(e){const n=document.createElement("div");n.classList.add("overflow-hidden");const t=document.createElement("div");return t.classList.add("fc-event-title","text-truncate","fw-semibold","fs-sm"),e.event.classNames.forEach(o=>{o.startsWith("text-")&&t.classList.add(o)}),t.innerText=e.event.title,n.appendChild(t),{domNodes:[n]}},dateClick:function(e){m();var n=new window.bootstrap.Modal(document.getElementById("addEventModal"));document.getElementById("eventDateInput").value=e.dateStr,document.getElementById("endEventDateInput").value=e.dateStr,document.getElementById("modalTitle").textContent="Add Event",document.getElementById("submitEventBtn").textContent="Create Event",document.getElementById("eventForm").removeAttribute("data-event-id"),n.show()},eventClick:function(e){var o,r;m();var n=new window.bootstrap.Modal(document.getElementById("addEventModal"));document.getElementById("modalTitle").textContent="Edit Event",document.getElementById("submitEventBtn").textContent="Update Event",document.getElementById("eventNameInput").value=e.event.title;const t=e.event.start?y(e.event.start):"";document.getElementById("eventDateInput").value=t;const a=e.event.end?y(e.event.end):t;if(document.getElementById("endEventDateInput").value=a,!e.event.allDay&&e.event.start){const c=e.event.start.getHours().toString().padStart(2,"0"),u=e.event.start.getMinutes().toString().padStart(2,"0");document.getElementById("eventTimeInput").value=`${c}:${u}`}document.getElementById("locationInput").value=((o=e.event.extendedProps)==null?void 0:o.location)||"",document.getElementById("eventForm").setAttribute("data-event-id",e.event.id),D(((r=e.event.extendedProps)==null?void 0:r.guests)||[]),n.show()},drop:function(e){}});v.render();function y(e){const n=e.getFullYear(),t=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return`${n}-${t}-${a}`}function m(){document.getElementById("eventForm").reset(),document.getElementById("guestList").innerHTML=""}function D(e){const n=document.getElementById("guestList");n.innerHTML="",e&&e.length>0&&e.forEach(t=>{const a=E(t.email,t.avatarId);n.appendChild(a)})}function E(e,n){const t=document.createElement("div");t.className="position-relative rounded-circle size-9",t.setAttribute("data-email",e);const a=document.createElement("img");a.src=`assets/images/avatar/user-${n}.png`,a.alt=e,a.className="size-9 rounded-circle";const o=document.createElement("a");return o.href="#!",o.className="position-absolute d-inline-flex align-items-center justify-content-center text-white bg-dark fs-13 border-2 rounded-circle size-4 top-0 end-0 me-n1 mt-n1",o.innerHTML='<i class="text-xs ri-close-line"></i>',o.addEventListener("click",function(r){r.preventDefault(),t.remove()}),t.appendChild(a),t.appendChild(o),t}document.getElementById("addGuestBtn").addEventListener("click",function(){const e=document.getElementById("guestInput"),n=e.value.trim();if(n&&h(n)){const t=Math.floor(Math.random()*30)+1,a=E(n,t);document.getElementById("guestList").appendChild(a),e.value=""}else alert("Please enter a valid email address")});function h(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}if(document.getElementById("eventForm").addEventListener("submit",function(e){e.preventDefault();const n=document.getElementById("eventNameInput").value,t=document.getElementById("eventDateInput").value,a=document.getElementById("endEventDateInput").value,o=document.getElementById("eventTimeInput").value,r=document.getElementById("locationInput").value,c=this.getAttribute("data-event-id");let u="primary";if(typeof VirtualSelect<"u"){const s=document.querySelector("#ColorSelect").querySelector(".vscomp-value-tag");s&&(u=s.getAttribute("data-value")||"primary")}let I=new Date(t),b=new Date(a||t);if(o){const[s,i]=o.split(":");I.setHours(parseInt(s),parseInt(i)),b.setHours(parseInt(s),parseInt(i))}const C=document.getElementById("guestList").querySelectorAll("[data-email]"),w=Array.from(C).map(s=>{const i=s.getAttribute("data-email"),x=s.querySelector("img").src,S=x.match(/user-(\d+)\.png/)?parseInt(x.match(/user-(\d+)\.png/)[1]):1;return{email:i,avatarId:S}}),g={title:n,start:I,end:b,allDay:!o,className:"bg-"+u+"-subtle text-"+u+" ps-5 px-3 py-10px rounded-2",extendedProps:{location:r,guests:w}};if(n){if(c){const i=v.getEventById(c);i&&i.remove(),g.id=c}else g.id="event-"+new Date().getTime();v.addEvent(g),window.bootstrap.Modal.getInstance(document.getElementById("addEventModal")).hide(),m()}}),document.getElementById("newEvent").addEventListener("click",function(){const e=new Date().toISOString().split("T")[0];document.getElementById("eventDateInput").value=e,document.getElementById("endEventDateInput").value=e,m(),document.getElementById("modalTitle").textContent="Add Event",document.getElementById("submitEventBtn").textContent="Create Event",document.getElementById("eventForm").removeAttribute("data-event-id")}),typeof VirtualSelect<"u")VirtualSelect.init({ele:"#ColorSelect",options:[{label:"Green",value:"primary"},{label:"Blue",value:"info"},{label:"Pink",value:"pink"},{label:"Indigo",value:"indigo"}],search:!1});else{console.error("VirtualSelect is not loaded");const e=document.getElementById("ColorSelect");if(e){const n=document.createElement("select");n.className="form-select",n.id="ColorSelectFallback",[{label:"Green",value:"primary"},{label:"Blue",value:"info"},{label:"Pink",value:"pink"},{label:"Indigo",value:"indigo"}].forEach(a=>{const o=document.createElement("option");o.value=a.value,o.textContent=a.label,n.appendChild(o)}),e.parentNode.replaceChild(n,e)}}});
