import{c as u,i as h}from"../../admin.bundle-CEbNEZ37.js";/* empty css                               */import{u as p}from"../../apexcharts.esm-B_m6KPN7.js";import"../../main-O_SKZbQk.js";class f{constructor(e){this.tableBodyId=e.tableBodyId,this.paginationId=e.paginationId,this.paginationInfoId=e.paginationInfoId,this.deleteModalId=e.deleteModalId,this.itemsPerPage=e.itemsPerPage||10,this.currentPage=1,this.currentSortColumn=null,this.currentSortDirection="asc",this.searchTerm="",this.data=[{id:"INV-1001",customerName:"Robert Johnson",invoiceDate:"2023-12-15",amount:1500,dueDate:"2024-01-15",status:"Pending",image:"assets/images/avatar/user-3.png"},{id:"INV-1002",customerName:"Sarah Williams",invoiceDate:"2023-12-20",amount:2500.5,dueDate:"2024-02-01",status:"Paid",image:"assets/images/avatar/user-2.png"},{id:"INV-1003",customerName:"Michael Brown",invoiceDate:"2024-01-10",amount:3200.75,dueDate:"2024-03-12",status:"Overdue",image:""},{id:"INV-1004",customerName:"Emily Davis",invoiceDate:"2024-02-15",amount:1800,dueDate:"2024-04-22",status:"Paid",image:"assets/images/avatar/user-24.png"},{id:"INV-1005",customerName:"James Wilson",invoiceDate:"2024-03-01",amount:4500,dueDate:"2024-05-30",status:"Pending",image:"assets/images/avatar/user-25.png"},{id:"INV-1006",customerName:"Jennifer Martinez",invoiceDate:"2024-04-10",amount:2700.25,dueDate:"2024-06-05",status:"Overdue",image:"assets/images/avatar/user-26.png"},{id:"INV-1007",customerName:"David Anderson",invoiceDate:"2024-05-15",amount:3100,dueDate:"2024-07-18",status:"Pending",image:""},{id:"INV-1008",customerName:"Lisa Taylor",invoiceDate:"2024-06-01",amount:5e3,dueDate:"2024-08-14",status:"Paid",image:"assets/images/avatar/user-27.png"}],this.filteredData=[...this.data],this.bindEvents(),this.setupSortableColumns(),this.setupCheckboxes(),this.renderTable(),u({icons:h})}bindEvents(){const e=document.getElementById("confirmDeleteBtn");e?e.addEventListener("click",()=>{const t=document.getElementById("deleteInvoiceId").value;this.deleteInvoice(t)}):console.error("Confirm delete button not found");const s=document.getElementById(this.tableBodyId);s?s.addEventListener("click",t=>{const n=t.target.closest(".delete-btn");if(n){const a=n.getAttribute("data-id");document.getElementById("deleteInvoiceId").value=a;try{new window.bootstrap.Modal(document.getElementById(this.deleteModalId)).show()}catch(r){console.error("Error opening delete modal:",r)}}}):console.error("Table body not found:",this.tableBodyId)}applyFilters(){this.filteredData=this.data.filter(e=>this.searchTerm?e.id.toLowerCase().includes(this.searchTerm)||e.customerName.toLowerCase().includes(this.searchTerm)||e.invoiceDate.toLowerCase().includes(this.searchTerm)||e.amount.toString().includes(this.searchTerm)||e.dueDate.toLowerCase().includes(this.searchTerm)||e.status.toLowerCase().includes(this.searchTerm):!0),this.currentPage=1,this.renderTable()}setupSortableColumns(){document.querySelectorAll(".sortable").forEach(s=>{if(s.addEventListener("click",()=>{const t=s.getAttribute("data-column");this.sortData(t)}),!s.querySelector(".sort-icon")){const t=document.createElement("span");t.className="sort-icon ms-1",t.innerHTML='<i class="ri-arrow-up-down-line text-muted fs-sm"></i>',s.appendChild(t)}})}sortData(e){this.currentSortColumn===e?this.currentSortDirection=this.currentSortDirection==="asc"?"desc":"asc":(this.currentSortColumn=e,this.currentSortDirection="asc"),this.updateSortIcons(e),this.filteredData.sort((s,t)=>{let n=s[e],a=t[e];return e==="invoiceDate"||e==="dueDate"?(n=new Date(n),a=new Date(a),this.currentSortDirection==="asc"?n-a:a-n):e==="amount"?this.currentSortDirection==="asc"?n-a:a-n:(n=n?n.toString().toLowerCase():"",a=a?a.toString().toLowerCase():"",this.currentSortDirection==="asc"?n.localeCompare(a):a.localeCompare(n))}),this.renderTable()}updateSortIcons(e){document.querySelectorAll(".sortable").forEach(t=>{const n=t.getAttribute("data-column"),a=t.querySelector(".sort-icon");a&&(a.innerHTML='<i class="ri-arrow-up-down-line text-muted fs-sm"></i>',n===e&&(a.innerHTML=this.currentSortDirection==="asc"?'<i class="ri-arrow-up-line text-muted"></i>':'<i class="ri-arrow-down-line text-muted"></i>'))})}getStatusBadge(e){return`<span class="badge ${{Pending:"bg-warning-subtle text-warning",Paid:"bg-success-subtle text-success",Overdue:"bg-danger-subtle text-danger"}[e]||"bg-secondary-subtle text-secondary"}">${e}</span>`}formatDate(e){const s=new Date(e),t={day:"numeric",month:"short",year:"numeric"};return s.toLocaleDateString("en-US",t)}renderCustomerAvatar(e){return e.image?`<img src="${e.image}" loading="lazy" alt="${e.customerName}" class="size-10 rounded-circle">`:`<div class="size-10 bg-light-subtle rounded-circle text-muted fs-sm fw-semibold d-flex justify-content-center align-items-center">
                        ${this.getInitials(e.customerName)}
                    </div>`}getInitials(e){return e.split(" ").map(s=>s.charAt(0)).join("").toUpperCase()}setupCheckboxes(){const e=document.getElementById("checkAll");e?e.addEventListener("change",()=>{document.querySelectorAll("#invoiceTableBody .form-check-input").forEach(t=>{t.checked=e.checked})}):console.error("Check All checkbox not found")}renderTable(){const e=document.getElementById(this.tableBodyId);if(!e){console.error("Table body not found:",this.tableBodyId);return}e.innerHTML="";const s=(this.currentPage-1)*this.itemsPerPage,t=Math.min(s+this.itemsPerPage,this.filteredData.length),n=this.filteredData.slice(s,t);document.getElementById(this.paginationInfoId).innerHTML=`Showing <b class="me-1">${s+1}-${t}</b> of <b class="ms-1">${this.filteredData.length}</b> Results`,n.length===0?e.innerHTML='<tr><td colspan="7" class="text-center">No invoices found</td></tr>':n.forEach(a=>{const r=document.createElement("tr");r.innerHTML=`
                    <td>
                        <div class="form-check check-primary">
                            <input class="form-check-input" type="checkbox" aria-label="Select ${a.id}">
                            <label class="form-check-label d-none">Select ${a.id}</label>
                        </div>
                    </td>
                    <td>${a.id}</td>
                    <td>
                        <div class="d-flex align-items-center gap-3">
                            ${this.renderCustomerAvatar(a)}
                            <div>
                                <h6 class="mb-1"><a href="apps-invoice-details.html" class="text-reset">${a.customerName}</a></h6>
                            </div>
                        </div>
                    </td>
                    <td>${this.formatDate(a.invoiceDate)}</td>
                    <td>$${a.amount.toFixed(2)}</td>
                    <td>${this.formatDate(a.dueDate)}</td>
                    <td>${this.getStatusBadge(a.status)}</td>
                    <td>
                        <div class="d-flex align-items-center gap-2">
                            <button class="btn btn-sub-info size-8 btn-icon delete-btn">
                                <i class="ri-edit-line"></i>
                            </button>
                            <button class="btn btn-sub-danger size-8 btn-icon delete-btn" data-id="${a.id}">
                                <i class="ri-delete-bin-line"></i>
                            </button>
                        </div>
                    </td>
                `,e.appendChild(r)}),this.renderPagination()}renderPagination(){const e=document.getElementById(this.paginationId);if(!e){console.error("Pagination element not found:",this.paginationId);return}e.innerHTML="";const s=Math.ceil(this.filteredData.length/this.itemsPerPage),t=document.createElement("li");t.className=`page-item ${this.currentPage===1?"disabled":""}`,t.innerHTML='<a class="page-link" href="#!"><i data-lucide="chevron-left" class="size-4"></i> Previous</a>',t.addEventListener("click",a=>{a.preventDefault(),this.currentPage>1&&(this.currentPage--,this.renderTable())}),e.appendChild(t);for(let a=1;a<=s;a++){const r=document.createElement("li");r.className=`page-item ${a===this.currentPage?"active":""}`,r.innerHTML=`<a class="page-link" href="#!">${a}</a>`,r.addEventListener("click",y=>{y.preventDefault(),this.currentPage=a,this.renderTable()}),e.appendChild(r)}const n=document.createElement("li");n.className=`page-item ${this.currentPage===s?"disabled":""}`,n.innerHTML='<a class="page-link" href="#!">Next <i data-lucide="chevron-right" class="size-4"></i></a>',n.addEventListener("click",a=>{a.preventDefault(),this.currentPage<s&&(this.currentPage++,this.renderTable())}),e.appendChild(n),u({icons:h})}deleteInvoice(e){this.data=this.data.filter(t=>t.id!==e),this.applyFilters();try{const t=window.bootstrap.Modal.getInstance(document.getElementById(this.deleteModalId));t&&t.hide()}catch(t){console.error("Error hiding delete modal:",t)}const s=Math.ceil(this.filteredData.length/this.itemsPerPage);this.currentPage>s&&s>0&&(this.currentPage=s),this.renderTable()}}document.addEventListener("DOMContentLoaded",()=>{window.tableManager=new f({tableBodyId:"invoiceTableBody",paginationId:"pagination",paginationInfoId:"paginationInfo",deleteModalId:"deleteModal",itemsPerPage:10})});function b(i){const e=getComputedStyle(document.documentElement).getPropertyValue(i).trim();return/^\d{1,3},\s*\d{1,3},\s*\d{1,3}$/.test(e)?`rgb(${e})`:e}var l=[];const x=i=>{const e=JSON.parse(JSON.stringify(i)),s=t=>{for(const n in t)typeof t[n]=="string"&&t[n].startsWith("--dx-")?t[n]=b(t[n]):typeof t[n]=="object"&&t[n]!==null&&s(t[n])};return s(e),e};function d(i=""){i&&document.documentElement.setAttribute("data-colors",i),l.forEach(e=>{const s=JSON.parse(JSON.stringify(e[0].data)),t=x(structuredClone(s));e[0].chart&&e[0].chart.destroy();var n=new p(document.querySelector("#"+e[0].id),t);n.render(),e[0].chart=n})}document.querySelectorAll('input[name="data-colors"]').forEach(i=>{i.addEventListener("change",function(){c(this.value)})});document.querySelectorAll('input[name="data-bs-theme"]').forEach(i=>{i.addEventListener("change",function(){c(this.value)})});var m;(m=document.getElementById("darkModeButton"))==null||m.addEventListener("click",function(){c(this.value)});function c(i){setTimeout(()=>{d(i)},0)}var g;(g=document.getElementById("darkModeButton"))==null||g.addEventListener("click",function(){setTimeout(()=>{d()},0)});var o={series:[{name:"Transactions",data:[{x:"Dec 23 2017",y:null},{x:"Dec 24 2017",y:44},{x:"Dec 25 2017",y:31},{x:"Dec 26 2017",y:38},{x:"Dec 27 2017",y:null},{x:"Dec 28 2017",y:32},{x:"Dec 29 2017",y:55},{x:"Dec 30 2017",y:51},{x:"Dec 31 2017",y:67},{x:"Jan 01 2018",y:22},{x:"Jan 02 2018",y:34},{x:"Jan 03 2018",y:null},{x:"Jan 04 2018",y:null},{x:"Jan 05 2018",y:11},{x:"Jan 06 2018",y:4},{x:"Jan 07 2018",y:15},{x:"Jan 08 2018",y:null},{x:"Jan 09 2018",y:9},{x:"Jan 10 2018",y:34},{x:"Jan 11 2018",y:null},{x:"Jan 12 2018",y:null},{x:"Jan 13 2018",y:13},{x:"Jan 14 2018",y:null}]}],chart:{type:"area",height:200,animations:{enabled:!1},zoom:{enabled:!1},toolbar:{show:!1},offsetX:-10},dataLabels:{enabled:!1},stroke:{curve:"straight",width:2},fill:{opacity:.8,type:"pattern",pattern:{style:["verticalLines","horizontalLines"],width:5,height:6}},markers:{size:5,hover:{size:9}},tooltip:{intersect:!0,shared:!1},theme:{palette:"palette1"},xaxis:{type:"datetime"},colors:["--dx-primary"],grid:{padding:{right:0}}};l.push([{id:"totalTransactionsChart",data:o}]);var o={series:[{name:"Sales",data:[{x:"Dec 23 2017",y:null},{x:"Dec 24 2017",y:44},{x:"Dec 25 2017",y:31},{x:"Dec 26 2017",y:38},{x:"Dec 27 2017",y:null},{x:"Dec 28 2017",y:32},{x:"Dec 29 2017",y:55},{x:"Dec 30 2017",y:51},{x:"Dec 31 2017",y:67},{x:"Jan 01 2018",y:22},{x:"Jan 02 2018",y:34},{x:"Jan 03 2018",y:null},{x:"Jan 04 2018",y:null},{x:"Jan 05 2018",y:11},{x:"Jan 06 2018",y:4},{x:"Jan 07 2018",y:15},{x:"Jan 08 2018",y:null},{x:"Jan 09 2018",y:9},{x:"Jan 10 2018",y:34},{x:"Jan 11 2018",y:null},{x:"Jan 12 2018",y:null},{x:"Jan 13 2018",y:13},{x:"Jan 14 2018",y:null}]}],chart:{type:"area",height:200,animations:{enabled:!1},zoom:{enabled:!1},toolbar:{show:!1},offsetX:-10},dataLabels:{enabled:!1},stroke:{curve:"straight",width:2},fill:{opacity:.8,type:"pattern",pattern:{style:["verticalLines","horizontalLines"],width:5,height:6}},markers:{size:5,hover:{size:9}},tooltip:{intersect:!0,shared:!1},theme:{palette:"palette1"},xaxis:{type:"datetime"},colors:["--dx-secondary"],grid:{padding:{right:0}}};l.push([{id:"totalSalesChart",data:o}]);var o={series:[{name:"Payments",data:[{x:"Dec 23 2017",y:null},{x:"Dec 24 2017",y:44},{x:"Dec 25 2017",y:31},{x:"Dec 26 2017",y:38},{x:"Dec 27 2017",y:null},{x:"Dec 28 2017",y:32},{x:"Dec 29 2017",y:55},{x:"Dec 30 2017",y:51},{x:"Dec 31 2017",y:67},{x:"Jan 01 2018",y:22},{x:"Jan 02 2018",y:34},{x:"Jan 03 2018",y:null},{x:"Jan 04 2018",y:null},{x:"Jan 05 2018",y:11},{x:"Jan 06 2018",y:4},{x:"Jan 07 2018",y:15},{x:"Jan 08 2018",y:null},{x:"Jan 09 2018",y:9},{x:"Jan 10 2018",y:34},{x:"Jan 11 2018",y:null},{x:"Jan 12 2018",y:null},{x:"Jan 13 2018",y:13},{x:"Jan 14 2018",y:null}]}],chart:{type:"area",height:200,animations:{enabled:!1},zoom:{enabled:!1},toolbar:{show:!1},offsetX:-10},dataLabels:{enabled:!1},stroke:{curve:"straight",width:2},fill:{opacity:.8,type:"pattern",pattern:{style:["verticalLines","horizontalLines"],width:5,height:6}},markers:{size:5,hover:{size:9}},tooltip:{intersect:!0,shared:!1},theme:{palette:"palette1"},xaxis:{type:"datetime"},colors:["--dx-danger"],grid:{padding:{right:0}}};l.push([{id:"totalPaymentsChart",data:o}]);window.addEventListener("DOMContentLoaded",()=>{d()});window.addEventListener("resize",()=>{setTimeout(()=>{d()},0)});
