import{c as l,i as m}from"../../admin.bundle-CEbNEZ37.js";/* empty css                               */import{A as c}from"../../air-datepicker-C9mgs6L9.js";import"../../main-O_SKZbQk.js";import"../../_commonjsHelpers-CqkleIqs.js";class u{constructor(e){this.tableBodyId=e.tableBodyId,this.paginationId=e.paginationId,this.paginationInfoId=e.paginationInfoId,this.formId=e.formId,this.modalId=e.modalId,this.deleteModalId=e.deleteModalId,this.itemsPerPage=e.itemsPerPage||10,this.currentPage=1,this.currentSortColumn=null,this.currentSortDirection="asc",this.data=[{id:"CUS-2001",name:"Robert Johnson",propertyType:"Villa",email:"robert.johnson@example.com",phone:"+1 555 234 5678",status:"Negotiation",budget:"$450,000",registrationDate:"2024-08-15",image:"assets/images/avatar/user-3.png"},{id:"CUS-2002",name:"Sarah Williams",propertyType:"Apartment",email:"sarah.williams@example.com",phone:"+44 20 7946 1234",status:"Site Visit",budget:"$280,000",registrationDate:"2024-09-01",image:"assets/images/avatar/user-2.png"},{id:"CUS-2003",name:"Michael Brown",propertyType:"Commercial",email:"michael.brown@example.com",phone:"+61 2 9374 5000",status:"Inquiry",budget:"$850,000",registrationDate:"2024-09-12",image:""},{id:"CUS-2004",name:"Emily Davis",propertyType:"House",email:"emily.davis@example.com",phone:"+49 30 234567",status:"Closed",budget:"$520,000",registrationDate:"2024-07-22",image:"assets/images/avatar/user-24.png"},{id:"CUS-2005",name:"James Wilson",propertyType:"Land",email:"james.wilson@example.com",phone:"+33 1 42 68 54 00",status:"Negotiation",budget:"$180,000",registrationDate:"2024-08-30",image:"assets/images/avatar/user-25.png"},{id:"CUS-2006",name:"Jennifer Martinez",propertyType:"Apartment",email:"jennifer.martinez@example.com",phone:"+34 91 234 56 78",status:"Site Visit",budget:"$310,000",registrationDate:"2024-09-05",image:"assets/images/avatar/user-26.png"},{id:"CUS-2007",name:"David Anderson",propertyType:"Office Space",email:"david.anderson@example.com",phone:"+49 40 234567",status:"Inquiry",budget:"$680,000",registrationDate:"2024-09-18",image:""},{id:"CUS-2008",name:"Lisa Taylor",propertyType:"Villa",email:"lisa.taylor@example.com",phone:"+81 3 2345 6789",status:"Closed",budget:"$720,000",registrationDate:"2024-06-14",image:"assets/images/avatar/user-27.png"},{id:"CUS-2009",name:"Christopher Moore",propertyType:"House",email:"chris.moore@example.com",phone:"+91 22 2345 6789",status:"Lost",budget:"$390,000",registrationDate:"2024-08-08",image:""},{id:"CUS-2010",name:"Patricia Garcia",propertyType:"Apartment",email:"patricia.garcia@example.com",phone:"+55 11 2345-6789",status:"Negotiation",budget:"$265,000",registrationDate:"2024-09-20",image:"assets/images/avatar/user-28.png"},{id:"CUS-2011",name:"Daniel Rodriguez",propertyType:"Commercial",email:"daniel.rodriguez@example.com",phone:"+7 495 234-56-78",status:"Site Visit",budget:"$950,000",registrationDate:"2024-09-03",image:"assets/images/avatar/user-10.png"},{id:"CUS-2012",name:"Michelle Lee",propertyType:"Villa",email:"michelle.lee@example.com",phone:"+27 11 234 5678",status:"Inquiry",budget:"$580,000",registrationDate:"2024-09-25",image:"assets/images/avatar/user-16.png"},{id:"CUS-2013",name:"Thomas White",propertyType:"Land",email:"thomas.white@example.com",phone:"+65 6 2345 678",status:"Inquiry",budget:"$220,000",registrationDate:"2024-09-28",image:""},{id:"CUS-2014",name:"Karen Martinez",propertyType:"Apartment",email:"karen.martinez@example.com",phone:"+39 06 234 5678",status:"Site Visit",budget:"$295,000",registrationDate:"2024-09-10",image:""},{id:"CUS-2015",name:"Mark Thompson",propertyType:"House",email:"mark.thompson@example.com",phone:"+52 55 2345 6789",status:"Closed",budget:"$475,000",registrationDate:"2024-07-05",image:"assets/images/avatar/user-19.png"},{id:"CUS-2016",name:"Nancy Harris",propertyType:"Office Space",email:"nancy.harris@example.com",phone:"+86 10 2345 6789",status:"Negotiation",budget:"$740,000",registrationDate:"2024-09-16",image:"assets/images/avatar/user-15.png"},{id:"CUS-2017",name:"Steven Clark",propertyType:"Villa",email:"steven.clark@example.com",phone:"+31 20 234 5678",status:"Site Visit",budget:"$690,000",registrationDate:"2024-09-22",image:""}],this.bindEvents(),this.setupImageUpload(),this.renderTable(),this.setupSortableColumns()}bindEvents(){document.getElementById(this.formId).addEventListener("submit",e=>{e.preventDefault(),this.saveCustomer()}),document.getElementById("confirmDeleteBtn").addEventListener("click",()=>{const e=document.getElementById("deleteCustomerId").value;this.deleteCustomer(e)}),document.getElementById("addCustomerBtn").addEventListener("click",()=>{this.resetForm()})}setupImageUpload(){const e=document.getElementById("imageInput"),t=document.getElementById("imagePreview"),i=document.getElementById("uploadIcon"),n=e.parentElement,a=document.getElementById("customerImagePath");n.addEventListener("click",()=>{e.click()}),e.addEventListener("change",s=>{if(s.target.files&&s.target.files[0]){const o=new FileReader;o.onload=r=>{t.src=r.target.result,t.style.display="block",i.style.display="none",a.value=r.target.result},o.readAsDataURL(s.target.files[0])}})}resetForm(){document.getElementById("customerId").value="",document.getElementById("customerImagePath").value="",document.getElementById("customerForm").reset(),document.getElementById("saveCustomerBtn").textContent="Add Customer";const e=document.getElementById("imagePreview"),t=document.getElementById("uploadIcon");e.style.display="none",t.style.display="block",e.src=""}setupSortableColumns(){document.querySelectorAll(".sortable").forEach(t=>{if(t.addEventListener("click",()=>{const i=t.getAttribute("data-column");this.sortData(i)}),!t.querySelector(".sort-icon")){const i=document.createElement("span");i.className="sort-icon ms-1",i.innerHTML='<i class="ri-arrow-up-down-line text-muted fs-sm"></i>',t.appendChild(i)}})}sortData(e){this.currentSortColumn===e?this.currentSortDirection=this.currentSortDirection==="asc"?"desc":"asc":(this.currentSortColumn=e,this.currentSortDirection="asc"),this.updateSortIcons(e),e==="registrationDate"?this.data.sort((t,i)=>{const n=new Date(t[e]),a=new Date(i[e]);return this.currentSortDirection==="asc"?n-a:a-n}):e==="budget"?this.data.sort((t,i)=>{const n=parseFloat(t[e].replace(/[$,]/g,"")),a=parseFloat(i[e].replace(/[$,]/g,""));return this.currentSortDirection==="asc"?n-a:a-n}):this.data.sort((t,i)=>{const n=t[e]?t[e].toString().toLowerCase():"",a=i[e]?i[e].toString().toLowerCase():"";return this.currentSortDirection==="asc"?n.localeCompare(a):a.localeCompare(n)}),this.currentPage=1,this.renderTable()}updateSortIcons(e){document.querySelectorAll(".sortable").forEach(i=>{const n=i.getAttribute("data-column"),a=i.querySelector(".sort-icon");a&&(a.innerHTML='<i class="ri-arrow-up-down-line text-muted fs-sm"></i>',n===e&&(this.currentSortDirection==="asc"?a.innerHTML='<i class="ri-arrow-up-line"></i>':a.innerHTML='<i class="ri-arrow-down-line"></i>'))})}getStatusBadge(e){return`<span class="badge ${{Inquiry:"bg-info-subtle text-info","Site Visit":"bg-warning-subtle text-warning",Negotiation:"bg-primary-subtle text-primary",Closed:"bg-success-subtle text-success",Lost:"bg-danger-subtle text-danger"}[e]||"bg-secondary-subtle text-secondary"}">${e}</span>`}renderTable(){const e=document.getElementById(this.tableBodyId);e.innerHTML="";const t=(this.currentPage-1)*this.itemsPerPage,i=Math.min(t+this.itemsPerPage,this.data.length),n=this.data.slice(t,i);document.getElementById(this.paginationInfoId).innerHTML=`Showing <b class="me-1">${t+1}-${i}</b> of <b class="ms-1">${this.data.length}</b> Results`,n.length===0?e.innerHTML='<tr><td colspan="9" class="text-center">No customer records found</td></tr>':(n.forEach(a=>{const s=document.createElement("tr");s.innerHTML=`
                    <td>${a.id}</td>
                    <td>
                        <div class="d-flex align-items-center gap-3">
                            ${this.renderCustomerAvatar(a)}
                            <div>
                                <h6 class="mb-1"><a href="apps-customer-details.html" class="text-reset">${a.name}</a></h6>
                            </div>
                        </div>
                    </td>
                    <td>${a.propertyType}</td>
                    <td><a href="#!" class="text-reset">${a.email}</a></td>
                    <td>${a.phone}</td>
                    <td>${this.getStatusBadge(a.status)}</td>
                    <td>${a.budget}</td>
                    <td>${this.formatDate(a.registrationDate)}</td>
                    <td>
                        <div class="d-flex align-items-center gap-2">
                            <button class="btn btn-sub-primary size-8 btn-icon edit-btn" data-id="${a.id}">
                                <i class="ri-pencil-line"></i>
                            </button>
                            <button class="btn btn-sub-danger size-8 btn-icon delete-btn" data-id="${a.id}">
                                <i class="ri-delete-bin-line"></i>
                            </button>
                        </div>
                    </td>
                `,e.appendChild(s)}),this.addActionButtonListeners()),this.renderPagination()}renderCustomerAvatar(e){return e.image?`<img src="${e.image}" loading="lazy" alt="${e.name}" class="size-10 rounded-circle">`:`<div class="size-10 bg-light-subtle rounded-circle text-muted fs-sm fw-semibold d-flex justify-content-center align-items-center">
                        ${this.getInitials(e.name)}
                    </div>`}getInitials(e){return e.split(" ").map(t=>t.charAt(0)).join("").toUpperCase()}formatDate(e){const t=new Date(e),i={day:"numeric",month:"short",year:"numeric"};return t.toLocaleDateString("en-US",i)}addActionButtonListeners(){document.querySelectorAll(".edit-btn").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-id");this.editCustomer(t)})}),document.querySelectorAll(".delete-btn").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-id");document.getElementById("deleteCustomerId").value=t,new window.bootstrap.Modal(document.getElementById(this.deleteModalId)).show()})})}renderPagination(){const e=document.getElementById(this.paginationId);e.innerHTML="";const t=Math.ceil(this.data.length/this.itemsPerPage),i=document.createElement("li");i.className=`page-item ${this.currentPage===1?"disabled":""}`,i.innerHTML='<a class="page-link" href="#!"><i data-lucide="chevron-left" class="size-4"></i> Previous</a>',i.addEventListener("click",()=>{this.currentPage>1&&(this.currentPage--,this.renderTable())}),e.appendChild(i);for(let a=1;a<=t;a++){const s=document.createElement("li");s.className=`page-item ${a===this.currentPage?"active":""}`,s.innerHTML=`<a class="page-link" href="#!">${a}</a>`,s.addEventListener("click",()=>{this.currentPage=a,this.renderTable()}),e.appendChild(s)}const n=document.createElement("li");n.className=`page-item ${this.currentPage===t?"disabled":""}`,n.innerHTML='<a class="page-link" href="#!">Next <i data-lucide="chevron-right" class="size-4"></i></a>',n.addEventListener("click",()=>{this.currentPage<t&&(this.currentPage++,this.renderTable())}),e.appendChild(n),l({icons:m})}editCustomer(e){const t=this.data.find(r=>r.id===e);if(!t)return;document.getElementById("customerId").value=t.id,document.getElementById("customerImagePath").value=t.image||"",document.getElementById("fullName").value=t.name,document.getElementById("customerDetails").value=t.customerDetails||"",document.getElementById("propertyType").value=t.propertyType,document.getElementById("status").value=t.status,document.getElementById("email").value=t.email,document.getElementById("phone").value=t.phone,document.getElementById("budget").value=t.budget;const n=new Date(t.registrationDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/ /g," ");document.getElementById("registrationDate").value=n;const a=document.getElementById("imagePreview"),s=document.getElementById("uploadIcon");t.image?(a.src=t.image,a.style.display="block",s.style.display="none"):(a.style.display="none",s.style.display="block"),document.getElementById("saveCustomerBtn").textContent="Update Customer",new window.bootstrap.Modal(document.getElementById(this.modalId)).show()}saveCustomer(){const e=document.getElementById("customerId").value,t=e!=="",i=document.getElementById("customerImagePath"),n=document.getElementById("imagePreview");let a;n.style.display!=="none"?a=i.value||n.src:a="";const s={name:document.getElementById("fullName").value,propertyType:document.getElementById("propertyType").value,status:document.getElementById("status").value,email:document.getElementById("email").value,phone:document.getElementById("phone").value,budget:document.getElementById("budget").value,registrationDate:document.getElementById("registrationDate").value,image:a};if(t){const r=this.data.findIndex(d=>d.id===e);r!==-1&&(this.data[r]={...this.data[r],...s})}else{const r=`CUS-${2e3+this.data.length}`;this.data.unshift({id:r,...s})}window.bootstrap.Modal.getInstance(document.getElementById(this.modalId)).hide(),this.resetForm(),this.renderTable()}deleteCustomer(e){this.data=this.data.filter(n=>n.id!==e),window.bootstrap.Modal.getInstance(document.getElementById(this.deleteModalId)).hide();const i=Math.ceil(this.data.length/this.itemsPerPage);this.currentPage>i&&i>0&&(this.currentPage=i),this.renderTable()}}new c("#registrationDate",{dateFormat:"dd MMM, yyyy",autoClose:!0,position:"bottom left",locale:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",firstDay:0}});VirtualSelect.init({ele:"#propertyType",options:[{label:"Apartment",value:"1"},{label:"Villa",value:"2"},{label:"House",value:"3"},{label:"Commercial",value:"4"},{label:"Land",value:"5"},{label:"Office Space",value:"6"}],selectedValue:0});VirtualSelect.init({ele:"#status",options:[{label:"Inquiry",value:"1"},{label:"Site Visit",value:"2"},{label:"Negotiation",value:"3"},{label:"Closed",value:"4"},{label:"Lost",value:"5"}],selectedValue:0});document.addEventListener("DOMContentLoaded",()=>{new u({tableBodyId:"customerTableBody",paginationId:"pagination",paginationInfoId:"paginationInfo",formId:"customerForm",modalId:"addCustomerModal",deleteModalId:"deleteModal",itemsPerPage:10})});
